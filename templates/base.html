<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Set Invoice - Invoice Management System{% endblock %}</title>
    <link href="{{ static('css/output.css') }}" rel="stylesheet">
    <link href="{{ static('css/custom.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="icon" href="{{ static('images/invoice.png') }}">
    <script src="{{ static('js/app.js') }}" defer></script>
    <script src="{{ static('js/tutorial.js') }}" defer></script>
</head>

<body class="bg-gray-100 font-sans antialiased">
    <div class="min-h-screen flex">
        <!-- Sidebar -->
        {% if request.user.is_authenticated %}
        <aside id="sidebar" class="w-64 bg-white shadow-lg fixed h-full flex flex-col transition-all duration-300">
            <div class="p-4 border-b">
                <h2 class="text-xl font-bold" style="color: #05CB3A;">Set Invoice</h2>
                <p class="text-xs text-gray-400 mt-0.5">Invoice Management System</p>
                <p class="text-xs text-gray-500">{{ request.user.email }}</p>
            </div>

            <!-- Navigation (Scrollable) -->
            <nav class="p-3 space-y-3 flex-1 overflow-y-auto">
                <!-- Dashboard -->
                <a href="{{ url('dashboard') }}"
                    class="flex items-center px-2 py-1.5 text-xs text-gray-700 rounded-lg transition sidebar-link">
                    <i class="bi bi-house-door text-xs mr-3"></i>
                    Dashboard
                </a>

                <!-- Customers -->
                <div class="space-y-1 mt-3">
                    <div class="flex items-center px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase">
                        <i class="bi bi-people text-xs mr-3"></i>
                        Customers
                    </div>
                    <a href="{{ url('customer_list') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        All Customers
                    </a>
                    <a href="{{ url('customer_add') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        Add Customer
                    </a>
                </div>

                <!-- Inventory -->
                <div class="space-y-1 mt-3">
                    <div class="flex items-center px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase">
                        <i class="bi bi-box-seam text-xs mr-3"></i>
                        Inventory
                    </div>
                    <a href="{{ url('category_list') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        Categories
                    </a>
                    <a href="{{ url('item_list') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        All Items
                    </a>
                    <a href="{{ url('item_add') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        Add Item
                    </a>
                </div>

                <!-- Invoices -->
                <div class="space-y-1 mt-3">
                    <div class="flex items-center px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase">
                        <i class="bi bi-file-earmark-text text-xs mr-3"></i>
                        Invoices
                    </div>
                    <a href="{{ url('invoice_list') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        All Invoices
                    </a>
                    <a href="{{ url('invoice_add') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        Create Invoice
                    </a>
                </div>

                <!-- Payments -->
                <div class="space-y-1 mt-3">
                    <div class="flex items-center px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase">
                        <i class="bi bi-credit-card text-xs"></i>
                        Payments
                    </div>
                    <a href="{{ url('payment_list') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        All Payments
                    </a>
                    <a href="{{ url('payment_add') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        Record Payment
                    </a>
                </div>

                <!-- Users (Admin Only) -->
                {% if request.user.role and request.user.role.role_name == 'Admin' %}
                <div class="space-y-1 mt-3">
                    <div class="flex items-center px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase">
                        <i class="bi bi-person-badge text-xs mr-3"></i>
                        Users
                    </div>
                    <a href="{{ url('user_list') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        All Users
                    </a>
                    <a href="{{ url('user_create') }}"
                        class="flex items-center px-2 py-1.5 text-xs text-gray-600 rounded-lg ml-6 sidebar-link">
                        <span class="w-1 h-1 bg-gray-400 rounded-full mr-2.5"></span>
                        Add User
                    </a>
                </div>
                {% endif %}

                <!-- Help -->
                <a href="#" onclick="startTutorial(); return false;"
                    class="flex items-center px-2 py-1.5 text-xs text-gray-700 rounded-lg transition mt-4 sidebar-link">
                    <i class="bi bi-question-circle text-xs mr-3"></i>
                    Start Tutorial
                </a>
            </nav>

            <!-- Footer (Fixed at Bottom) -->
            <div class="p-3 border-t bg-white">
                <a href="{{ url('profile') }}"
                    class="flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-gray-50 rounded-lg">
                    <i class="bi bi-person text-xs mr-3"></i>
                    Profile
                </a>
                <form action="{{ url('logout') }}" method="post" class="no-loading mt-2">
                    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                    <button type="submit"
                        class="w-full flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-gray-50 rounded-lg">
                        <i class="bi bi-box-arrow-right text-xs mr-3"></i>
                        Logout
                    </button>
                </form>
                <div class="mt-3 pt-3 border-t text-center">
                    <p class="text-xs text-gray-400">by
                        <a href="https://systemset.co" target="_blank" rel="noopener noreferrer"
                            class="font-semibold hover:underline" style="color: #05CB3A;">
                            Systemset Co
                        </a>
                    </p>
                </div>
            </div>
        </aside>
        {% endif %}

        <!-- Main Content Area -->
        <div class="flex-1 {% if request.user.is_authenticated %}ml-64{% endif %}">
            <!-- Top Bar -->
            <header class="bg-white shadow-sm sticky top-0 z-10">
                <div class="px-6 py-4 flex justify-between items-center">
                    <h1 class="text-2xl font-semibold text-gray-800">{% block page_title %}Dashboard{% endblock %}</h1>
                    {% if request.user.is_authenticated %}
                    <div class="flex items-center space-x-4">
                        <span class="text-xs text-gray-600">{{ request.user.email }}</span>
                        {% if request.user.role %}
                        <span class="px-2 py-1 text-xs font-semibold rounded-full text-white"
                            style="background-color: #05CB3A;">
                            {{ request.user.role.role_name }}
                        </span>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
            </header>

            <!-- Breadcrumbs -->
            {% block breadcrumbs %}{% endblock %}

            <!-- Page Content -->
            <main class="p-6">
                {% if messages %}
                <div class="mb-4">
                    {% for message in messages %}
                    <div
                        class="django-message p-4 mb-2 rounded-md {% if message.tags == 'error' %}bg-red-100 text-red-700{% else %}bg-green-100 text-green-700{% endif %}">
                        {{ message }}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}

                {% block content %}{% endblock %}
            </main>
        </div>
    </div>
</body>

</html>
